<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dokumentasi API — Searcher</title>
  <link rel="stylesheet" href="style2.css">
</head>
<body>

      <!-- Section Searcher -->
      <section class="card" id="image" aria-labelledby="image-title">
        <div class="card-header" id="image-title">Dokumentasi API — Searcher</div>

        <div class="table-wrapper">
          <table class="table" aria-describedby="image-title">
            <thead>
              <tr>
                <th>No</th>
                <th>Feature Name</th>
                <th>Request Method</th>
                <th>Description</th>
                <th>Query Parameter</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="imageTableBody">
              <!-- Diisi lewat JS -->
            </tbody>
          </table>
        </div>
        <div id="imageResponsePanel" class="response" aria-live="polite" style="display:none"></div>
      </section>

      <!-- Code samples Search Image -->
      <section class="card">
        <div class="card-header">Contoh Kode — Search Image</div>
        <div class="tabs">
          <div class="tab-list" role="tablist" aria-label="Contoh kode Search Image">
            <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="jsImage" id="tabJSImage">JavaScript</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="pyImage" id="tabPyImage">Python</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="goImage" id="tabGoImage">Golang</button>
          </div>

          <!-- JS -->
          <div id="jsImage" role="tabpanel" aria-labelledby="tabJSImage" class="code">
      <pre><code class="language-js">
      // Search Image
      const apiKey = "YOUR_API_KEY";
      fetch("https://api2.teamhackbotsindo.my.id/api/searchimage?q=cat", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Search Image:", data))
        .catch(err => console.error(err));
      </code></pre>
          </div>

          <!-- Python -->
          <div id="pyImage" role="tabpanel" aria-labelledby="tabPyImage" class="code" style="display:none">
      <pre><code class="language-python">
      import requests

      apiKey = "YOUR_API_KEY"
      url = "https://api2.teamhackbotsindo.my.id/api/searchimage?q=cat"
      resp = requests.get(url, headers={"x-api-key": apiKey})
      print(resp.json())
      </code></pre>
          </div>

          <!-- Golang -->
          <div id="goImage" role="tabpanel" aria-labelledby="tabGoImage" class="code" style="display:none">
      <pre><code class="language-go">
      package main

      import (
        "fmt"
        "net/http"
        "io/ioutil"
      )

      func main() {
        apiKey := "YOUR_API_KEY"
        url := "https://api2.teamhackbotsindo.my.id/api/searchimage?q=cat"

        client := &http.Client{}
        req, _ := http.NewRequest("GET", url, nil)
        req.Header.Set("x-api-key", apiKey)

        resp, _ := client.Do(req)
        defer resp.Body.Close()

        body, _ := ioutil.ReadAll(resp.Body)
        fmt.Println(string(body))
      }
      </code></pre>
          </div>
        </div>
      </section>

      <!-- Code samples Lirik Lagu -->
      <section class="card">
        <div class="card-header">Contoh Kode — Lirik Lagu</div>
        <div class="tabs">
          <div class="tab-list" role="tablist" aria-label="Contoh kode Lirik Lagu">
            <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="jsLirik" id="tabJSLirik">JavaScript</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="pyLirik" id="tabPyLirik">Python</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="goLirik" id="tabGoLirik">Golang</button>
          </div>

          <!-- JS -->
          <div id="jsLirik" role="tabpanel" aria-labelledby="tabJSLirik" class="code">
      <pre><code class="language-js">
      // Lirik Lagu
      const apiKey = "YOUR_API_KEY";
      fetch("https://api2.teamhackbotsindo.my.id/api/lirik?title=yang%20terdalam&artist=peterpan", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Lyrics:", data))
        .catch(err => console.error(err));
      </code></pre>
          </div>

          <!-- Python -->
          <div id="pyLirik" role="tabpanel" aria-labelledby="tabPyLirik" class="code" style="display:none">
      <pre><code class="language-python">
      import requests

      apiKey = "YOUR_API_KEY"
      url = "https://api2.teamhackbotsindo.my.id/api/lirik?title=yang%20terdalam&artist=peterpan"
      resp = requests.get(url, headers={"x-api-key": apiKey})
      print(resp.json())
      </code></pre>
          </div>

          <!-- Golang -->
          <div id="goLirik" role="tabpanel" aria-labelledby="tabGoLirik" class="code" style="display:none">
      <pre><code class="language-go">
      package main

      import (
        "fmt"
        "net/http"
        "io/ioutil"
      )

      func main() {
        apiKey := "YOUR_API_KEY"
        url := "https://api2.teamhackbotsindo.my.id/api/lirik?title=yang%20terdalam&artist=peterpan"

        client := &http.Client{}
        req, _ := http.NewRequest("GET", url, nil)
        req.Header.Set("x-api-key", apiKey)

        resp, _ := client.Do(req)
        defer resp.Body.Close()

        body, _ := ioutil.ReadAll(resp.Body)
        fmt.Println(string(body))
      }
      </code></pre>
          </div>
        </div>
      </section>

  <script>
    // API-SearchImage + Lirik Lagu
    const imageEndpoints = [
      { no: 1, name: "Search Image", method: "GET", desc: "Cari gambar dari query", query: "apikey, q" },
      { no: 2, name: "Lirik Lagu", method: "GET", desc: "Cari lirik dari title+artis", query: "apikey, title, artist" }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      const imageBody = document.getElementById('imageTableBody');
      imageEndpoints.forEach(ep => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${ep.no}</td>
          <td>${ep.name}</td>
          <td><span class="badge ${ep.method}">${ep.method}</span></td>
          <td>${ep.desc}</td>
          <td>${ep.query}</td>
          <td><button class="btn" onclick="tryImage('${ep.name}')">Try</button></td>
        `;
        imageBody.appendChild(tr);
      });
    });
    function tryImage(feature) {
      const panel = document.getElementById('imageResponsePanel');
      panel.style.display = 'block';
      panel.textContent = `⚡ Menjalankan ${feature}...`;

      const apiKey = document.getElementById('apiKeyInput')?.value || "";
      if (!apiKey) {
        panel.textContent = "Error: API key wajib diisi!";
        return;
      }

      let url = "";
      switch (feature) {
        case "Search Image":
          // contoh query default "cat"
          url = `https://api2.teamhackbotsindo.my.id/api/searchimage?apikey=${apiKey}&q=cat`;
          break;
        case "Lirik Lagu":
          // contoh default: judul "yang terdalam", artis "peterpan"
          url = `https://api2.teamhackbotsindo.my.id/api/lirik?title=yang%20terdalam&artist=peterpan`;
          break;
      }

      fetch(url, { headers: { "x-api-key": apiKey } })
        .then(res => res.json())
        .then(data => {
          if (feature === "Search Image") {
            const results = data.results || [];
            if (!results.length) {
              panel.textContent = "Tidak ada gambar ditemukan.";
              return;
            }
            let html = "<h4>Hasil Pencarian:</h4><ul>";
            results.forEach(img => {
              html += `
                <li>
                  <p><strong>${img.description || "-"}</strong></p>
                  <p><strong>Photographer:</strong> <a href="${img.profile}" target="_blank">${img.photographer}</a></p>
                  <img src="${img.image_small}" style="max-width:200px">
                </li>
              `;
            });
            html += "</ul>";
            panel.innerHTML = html;
          } else if (feature === "Lirik Lagu") {
            const lyrics = data.result?.lyrics || [];
            if (!lyrics.length) {
              panel.textContent = "Tidak ada lirik ditemukan.";
              return;
            }
            let html = "<h4>Lirik Lagu:</h4><pre>";
            lyrics.forEach(line => {
              if (line.text) html += line.text + "\n";
            });
            html += "</pre>";
            panel.innerHTML = html;
          }
        })
        .catch(err => panel.textContent = "Error: " + err);
    }

    // TAB SEARCH IMAGE
    const tabJSImage = document.getElementById('tabJSImage');
    const tabPyImage = document.getElementById('tabPyImage');
    const tabGoImage = document.getElementById('tabGoImage');

    const jsImage = document.getElementById('jsImage');
    const pyImage = document.getElementById('pyImage');
    const goImage = document.getElementById('goImage');

    function showImage(tab) {
      // reset semua tab & panel
      [tabJSImage, tabPyImage, tabGoImage].forEach(btn => btn.classList.remove('active'));
      [jsImage, pyImage, goImage].forEach(panel => panel.style.display = 'none');

      // aktifkan tab yang dipilih
      tab.classList.add('active');
      document.getElementById(tab.getAttribute('aria-controls')).style.display = 'block';
    // Sinkronisasi dengan sidebar
      const targetId = tab.getAttribute('aria-controls');
      const sidebarLink = document.querySelector(`.sidebar .nav-list a[href="#${targetId}"]`);
      if (sidebarLink) {
        document.querySelectorAll('.sidebar .nav-list a').forEach(link => link.classList.remove('active'));
        sidebarLink.classList.add('active');
      }
    }

    // event listener
    tabJSImage.addEventListener('click', () => showImage(tabJSImage));
    tabPyImage.addEventListener('click', () => showImage(tabPyImage));
    tabGoImage.addEventListener('click', () => showImage(tabGoImage));

    // TAB LIRIK LAGU
    const tabJSLirik = document.getElementById('tabJSLirik');
    const tabPyLirik = document.getElementById('tabPyLirik');
    const tabGoLirik = document.getElementById('tabGoLirik');

    const jsLirik = document.getElementById('jsLirik');
    const pyLirik = document.getElementById('pyLirik');
    const goLirik = document.getElementById('goLirik');

    function showLirik(tab) {
      // reset semua tab & panel
      [tabJSLirik, tabPyLirik, tabGoLirik].forEach(btn => btn.classList.remove('active'));
      [jsLirik, pyLirik, goLirik].forEach(panel => panel.style.display = 'none');

      // aktifkan tab yang dipilih
      tab.classList.add('active');
      document.getElementById(tab.getAttribute('aria-controls')).style.display = 'block';
    // Sinkronisasi dengan sidebar
      const targetId = tab.getAttribute('aria-controls');
      const sidebarLink = document.querySelector(`.sidebar .nav-list a[href="#${targetId}"]`);
      if (sidebarLink) {
        document.querySelectorAll('.sidebar .nav-list a').forEach(link => link.classList.remove('active'));
        sidebarLink.classList.add('active');
      }
    }

    // event listener
    tabJSLirik.addEventListener('click', () => showLirik(tabJSLirik));
    tabPyLirik.addEventListener('click', () => showLirik(tabPyLirik));
    tabGoLirik.addEventListener('click', () => showLirik(tabGoLirik));

  </script>
</body>
</html> 