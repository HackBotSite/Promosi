<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dokumentasi API — Primbon</title>
  <link rel="stylesheet" href="style2.css">
</head>
<body>

        <!-- Section Primbon -->
      <section class="card" id="primbon" aria-labelledby="primbon-title">
        <div class="card-header" id="primbon-title">Dokumentasi API — Primbon</div>

        <div class="table-wrapper">
          <table class="table" aria-describedby="primbon-title">
            <thead>
              <tr>
                <th>No</th>
                <th>Feature Name</th>
                <th>Request Method</th>
                <th>Description</th>
                <th>Query Parameter</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="primbonTableBody">
              <!-- Diisi lewat JS -->
            </tbody>
          </table>
        </div>
        <div id="primbonResponsePanel" class="response" aria-live="polite" style="display:none"></div>
      </section>

      <!-- Section Primbon Jodoh -->
      <section class="card">
        <div class="card-header">Contoh Kode — Primbon Jodoh</div>
        <div class="tabs">
          <div class="tab-list" role="tablist" aria-label="Contoh kode Primbon Jodoh">
            <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="curlPrimbonJodoh" id="tabCurlPrimbonJodoh">Curl</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="jsPrimbonJodoh" id="tabJSPrimbonJodoh">JavaScript</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="pyPrimbonJodoh" id="tabPyPrimbonJodoh">Python</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="goPrimbonJodoh" id="tabGoPrimbonJodoh">Golang</button>
          </div>

          <!-- CURL -->
          <div id="curlPrimbonJodoh" role="tabpanel" aria-labelledby="tabCurlPrimbonJodoh" class="code">
            <pre><code class="language-bash">
          # Arti Nama
          curl -X GET "https://api2.teamhackbotsindo.my.id/api/primbon-artinama?nama=Thousand" \
            -H "x-api-key: YOUR_API_KEY"

          # Arti Mimpi
          curl -X GET "https://api2.teamhackbotsindo.my.id/api/primbon-artimimpi?query=ular" \
            -H "x-api-key: YOUR_API_KEY"

          # Zodiak
          curl -X GET "https://api2.teamhackbotsindo.my.id/api/primbon-zodiak?sign=scorpio" \
            -H "x-api-key: YOUR_API_KEY"

          # Weton
          curl -X GET "https://api2.teamhackbotsindo.my.id/api/primbon-weton" \
            -H "x-api-key: YOUR_API_KEY"

          # Jodoh
          curl -X GET "https://api2.teamhackbotsindo.my.id/api/primbon-jodoh?nama1=ridwan&tanggal1=07-03-1986&nama2=nia%20putri&tanggal2=08-03-1997" \
            -H "x-api-key: YOUR_API_KEY"
            </code></pre>
          </div>

          <!-- JS -->
          <div id="jsPrimbonJodoh" role="tabpanel" aria-labelledby="tabJSPrimbonJodoh" class="code" style="display:none">
            <pre><code class="language-js">
          // Arti Nama
          fetch("https://api2.teamhackbotsindo.my.id/api/primbon-artinama?nama=Thousand", {
            headers: { "x-api-key": apiKey }
          })
            .then(res => res.json())
            .then(data => console.log("Arti Nama:", data));

          // Arti Mimpi
          fetch("https://api2.teamhackbotsindo.my.id/api/primbon-artimimpi?query=ular", {
            headers: { "x-api-key": apiKey }
          })
            .then(res => res.json())
            .then(data => console.log("Arti Mimpi:", data));

          // Zodiak
          fetch("https://api2.teamhackbotsindo.my.id/api/primbon-zodiak?sign=scorpio", {
            headers: { "x-api-key": apiKey }
          })
            .then(res => res.json())
            .then(data => console.log("Zodiak:", data));

          // Weton
          fetch("https://api2.teamhackbotsindo.my.id/api/primbon-weton", {
            headers: { "x-api-key": apiKey }
          })
            .then(res => res.json())
            .then(data => console.log("Weton:", data));

          // Jodoh
          fetch("https://api2.teamhackbotsindo.my.id/api/    primbon-jodoh?nama1=ridwan&tanggal1=07-03-1986&nama2=nia%20putri&tanggal2=08-03-1997", {
            headers: { "x-api-key": apiKey }
          })
            .then(res => res.json())
            .then(data => console.log("Jodoh:", data));
            </code></pre>
          </div>

          <!-- Python -->
          <div id="pyPrimbonJodoh" role="tabpanel" aria-labelledby="tabPyPrimbonJodoh" class="code" style="display:none">
            <pre><code class="language-python">
          import requests

          headers = { "x-api-key": apiKey }

          # Arti Nama
          resp = requests.get("https://api2.teamhackbotsindo.my.id/api/primbon-artinama?nama=Thousand", headers=headers)
          print("Arti Nama:", resp.json())

          # Arti Mimpi
          resp = requests.get("https://api2.teamhackbotsindo.my.id/api/primbon-artimimpi?query=ular", headers=headers)
          print("Arti Mimpi:", resp.json())

          # Zodiak
          resp = requests.get("https://api2.teamhackbotsindo.my.id/api/primbon-zodiak?sign=scorpio", headers=headers)
          print("Zodiak:", resp.json())

          # Weton
          resp = requests.get("https://api2.teamhackbotsindo.my.id/api/primbon-weton", headers=headers)
          print("Weton:", resp.json())

          # Jodoh
          resp = requests.get("https://api2.teamhackbotsindo.my.id/api/primbon-jodoh?nama1=ridwan&tanggal1=07-03-1986&nama2=nia%20putri&tanggal2=08-03-1997", headers=headers)
          print("Jodoh:", resp.json())
            </code></pre>
          </div>

          <!-- Golang -->
          <div id="goPrimbonJodoh" role="tabpanel" aria-labelledby="tabGoPrimbonJodoh" class="code" style="display:none">
            <pre><code class="language-go">
          package main

          import (
            "fmt"
            "net/http"
            "io/ioutil"
          )

          func fetchAPI(url string) {
            client := &http.Client{}
            req, _ := http.NewRequest("GET", url, nil)
            req.Header.Set("x-api-key", apiKey)

            resp, _ := client.Do(req)
            defer resp.Body.Close()

            body, _ := ioutil.ReadAll(resp.Body)
            fmt.Println(url, ":", string(body))
          }

          func main() {
            fetchAPI("https://api2.teamhackbotsindo.my.id/api/primbon-artinama?nama=Thousand")
            fetchAPI("https://api2.teamhackbotsindo.my.id/api/primbon-artimimpi?query=ular")
            fetchAPI("https://api2.teamhackbotsindo.my.id/api/primbon-zodiak?sign=scorpio")
            fetchAPI("https://api2.teamhackbotsindo.my.id/api/primbon-weton")
            fetchAPI("https://api2.teamhackbotsindo.my.id/api/primbon-jodoh?nama1=ridwan&tanggal1=07-03-1986&nama2=nia%20putri&tanggal2=08-03-1997")
          }
            </code></pre>
          </div>
        </div>
      </section>

  <script>

    // API-Primbon
    const primbonEndpoints = [
      { no: 1, name: "Arti Nama", method: "GET", desc: "Arti nama", query: ["apikey", "nama"] },
      { no: 2, name: "Arti Mimpi", method: "GET", desc: "Mimpi tafsir", query: ["apikey", "query"] },
      { no: 3, name: "Zodiak", method: "GET", desc: "Zodiak", query: ["apikey"] },
      { no: 4, name: "Weton", method: "GET", desc: "Weton", query: ["apikey"] },
      { no: 5, name: "Jodoh", method: "GET", desc: "Calculate jodoh", query: ["apikey"] }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      const primbonBody = document.getElementById('primbonTableBody');
      primbonEndpoints.forEach(ep => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${ep.no}</td>
          <td>${ep.name}</td>
          <td><span class="badge ${ep.method}">${ep.method}</span></td>
          <td>${ep.desc}</td>
          <td>${Array.isArray(ep.query) ? ep.query.join(", ") : ep.query}</td>
          <td><button class="btn" onclick="tryPrimbon('${ep.name}')">Try</button></td>
        `;
        primbonBody.appendChild(tr);
      });
    });
    function tryPrimbon(feature) {
      const panel = document.getElementById('primbonResponsePanel');
      panel.style.display = 'block';
      panel.textContent = `⚡ Menjalankan ${feature}...`;

      const apiKey = document.getElementById('apiKeyInput')?.value || "";
      if (!apiKey) {
        panel.textContent = "Error: API key wajib diisi!";
        return;
      }

      let url = "";
      switch (feature) {
        case "Arti Nama":
          url = `https://api2.teamhackbotsindo.my.id/api/primbon-artinama?apikey=${apiKey}&nama=Aminah`;
          break;
        case "Arti Mimpi":
          url = `https://api2.teamhackbotsindo.my.id/api/primbon-artimimpi?apikey=${apiKey}&query=ular`;
          break;
        case "Zodiak":
          url = `https://api2.teamhackbotsindo.my.id/api/primbon-zodiak?apikey=${apiKey}&sign=scorpio`;
          break;
        case "Weton":
          url = `https://api2.teamhackbotsindo.my.id/api/primbon-weton?apikey=${apiKey}`;
          break;
        case "Jodoh":
          url = `https://api2.teamhackbotsindo.my.id/api/primbon-jodoh?apikey=${apiKey}&nama1=ridwan&tanggal1=07-03-1986&nama2=nia%20putri&tanggal2=08-03-1997`;
          break;
      }

      fetch(url, { headers: { "x-api-key": apiKey } })
        .then(async res => {
          const raw = await res.text();
          try {
            return JSON.parse(raw);
          } catch {
            return { error: "Response bukan JSON", raw: raw.slice(0,200) };
          }
        })
        .then(data => {
          if (data.error) {
            panel.textContent = "Error: " + data.error;
            return;
          }
          panel.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
        })
        .catch(err => panel.textContent = "Error: " + err);
    }

    // TAB PRIMBON JODOH LIST
    const tabCurlPrimbonJodoh = document.getElementById('tabCurlPrimbonJodoh');
    const tabJSPrimbonJodoh = document.getElementById('tabJSPrimbonJodoh');
    const tabPyPrimbonJodoh = document.getElementById('tabPyPrimbonJodoh');
    const tabGoPrimbonJodoh = document.getElementById('tabGoPrimbonJodoh');

    const curlPrimbonJodoh = document.getElementById('curlPrimbonJodoh');
    const jsPrimbonJodoh = document.getElementById('jsPrimbonJodoh');
    const pyPrimbonJodoh = document.getElementById('pyPrimbonJodoh');
    const goPrimbonJodoh = document.getElementById('goPrimbonJodoh');

    function showPrimbonJodoh(tab) {
      [tabCurlPrimbonJodoh, tabJSPrimbonJodoh, tabPyPrimbonJodoh, tabGoPrimbonJodoh].forEach(btn => btn.classList.remove('active'));
      [curlPrimbonJodoh, jsPrimbonJodoh, pyPrimbonJodoh, goPrimbonJodoh].forEach(panel => panel.style.display = 'none');

      tab.classList.add('active');
      document.getElementById(tab.getAttribute('aria-controls')).style.display = 'block';
    // Sinkronisasi dengan sidebar
      const targetId = tab.getAttribute('aria-controls');
      const sidebarLink = document.querySelector(`.sidebar .nav-list a[href="#${targetId}"]`);
      if (sidebarLink) {
        document.querySelectorAll('.sidebar .nav-list a').forEach(link => link.classList.remove('active'));
        sidebarLink.classList.add('active');
      }
    }

    tabCurlPrimbonJodoh.addEventListener('click', () => showPrimbonJodoh(tabCurlPrimbonJodoh));
    tabJSPrimbonJodoh.addEventListener('click', () => showPrimbonJodoh(tabJSPrimbonJodoh));
    tabPyPrimbonJodoh.addEventListener('click', () => showPrimbonJodoh(tabPyPrimbonJodoh));
    tabGoPrimbonJodoh.addEventListener('click', () => showPrimbonJodoh(tabGoPrimbonJodoh));

  </script>
</body>
</html>