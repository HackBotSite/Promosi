<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dokumentasi API — News</title>
  <link rel="stylesheet" href="style2.css">
</head>
<body>
      <!-- Section News -->
      <section class="card" id="news" aria-labelledby="news-title">
        <div class="card-header" id="news-title">Dokumentasi API — News</div>

        <div class="table-wrapper">
          <table class="table" aria-describedby="news-title">
            <thead>
              <tr>
                <th>No</th>
                <th>Feature Name</th>
                <th>Request Method</th>
                <th>Description</th>
                <th>Query Parameter</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="newsTableBody">
              <!-- Diisi lewat JS -->
            </tbody>
          </table>
        </div>
        <div id="newsResponsePanel" class="response" aria-live="polite" style="display:none"></div>
      </section>

      <!-- Code samples News -->
      <section class="card">
        <div class="card-header">Contoh Kode — News</div>
        <div class="tabs">
          <div class="tab-list" role="tablist" aria-label="Contoh kode News">
            <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="jsNews" id="tabJSNews">JavaScript</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="pyNews" id="tabPyNews">Python</button>
            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="goNews" id="tabGoNews">Golang</button>
          </div>

          <!-- JS -->
          <div id="jsNews" role="tabpanel" aria-labelledby="tabJSNews" class="code">
      <pre><code class="language-js">
      // CNN Indonesia
      fetch("https://api2.teamhackbotsindo.my.id/api/news-cnn", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("CNN:", data));

      // Detik News
      fetch("https://api2.teamhackbotsindo.my.id/api/news-detik", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Detik:", data));

      // Liputan 6
      fetch("https://api2.teamhackbotsindo.my.id/api/news-liputan6", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Liputan 6:", data));

      // Kompas
      fetch("https://api2.teamhackbotsindo.my.id/api/news-kompas", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Kompas:", data));

      // Republika
      fetch("https://api2.teamhackbotsindo.my.id/api/news-republika", {
        headers: { "x-api-key": apiKey }
      })
        .then(res => res.json())
        .then(data => console.log("Republika:", data));
      </code></pre>
          </div>

          <!-- Python -->
          <div id="pyNews" role="tabpanel" aria-labelledby="tabPyNews" class="code" style="display:none">
      <pre><code class="language-python">
      import requests

      headers = { "x-api-key": apiKey }

      # CNN Indonesia
      resp = requests.get("https://api2.teamhackbotsindo.my.id/api/news-cnn", headers=headers)
      print("CNN:", resp.json())

      # Detik News
      resp = requests.get("https://api2.teamhackbotsindo.my.id/api/news-detik", headers=headers)
      print("Detik:", resp.json())

      # Liputan 6
      resp = requests.get("https://api2.teamhackbotsindo.my.id/api/news-liputan6", headers=headers)
      print("Liputan6:", resp.json())

      # Kompas
      resp = requests.get("https://api2.teamhackbotsindo.my.id/api/news-kompas", headers=headers)
      print("Kompas:", resp.json())

      # Republika
      resp = requests.get("https://api2.teamhackbotsindo.my.id/api/news-republika", headers=headers)
      print("Republika:", resp.json())
      </code></pre>
          </div>

          <!-- Golang -->
          <div id="goNews" role="tabpanel" aria-labelledby="tabGoNews" class="code" style="display:none">
      <pre><code class="language-go">
      package main

      import (
        "fmt"
        "net/http"
        "io/ioutil"
      )

      func fetchAPI(url string) {
        client := &http.Client{}
        req, _ := http.NewRequest("GET", url, nil)
        req.Header.Set("x-api-key", apiKey)

        resp, _ := client.Do(req)
        defer resp.Body.Close()

        body, _ := ioutil.ReadAll(resp.Body)
        fmt.Println(url, ":", string(body))
      }

      func main() {
        fetchAPI("https://api2.teamhackbotsindo.my.id/api/news-cnn")
        fetchAPI("https://api2.teamhackbotsindo.my.id/api/news-detik")
        fetchAPI("https://api2.teamhackbotsindo.my.id/api/news-liputan6")
        fetchAPI("https://api2.teamhackbotsindo.my.id/api/news-kompas")
        fetchAPI("https://api2.teamhackbotsindo.my.id/api/news-republika")
      }
      </code></pre>
          </div>
        </div>
      </section>

  <script>
    // API-News
    const newsEndpoints = [
      { no: 1, name: "CNN Indonesia", method: "GET", desc: "News Info from CNN Indonesia", query: ["apikey", "link"] },
      { no: 2, name: "Detik News", method: "GET", desc: "News Info from detik.com", query: ["apikey", "link"] },
      { no: 3, name: "Liputan 6", method: "GET", desc: "News Info from Liputan 6", query: ["apikey", "link"] },
      { no: 4, name: "Kompas", method: "GET", desc: "News Info from Kompas", query: ["apikey", "link"] },
      { no: 5, name: "Republika", method: "GET", desc: "News Info from Republika", query: ["apikey", "link"] }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      const newsBody = document.getElementById('newsTableBody');
      newsEndpoints.forEach(ep => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${ep.no}</td>
          <td>${ep.name}</td>
          <td><span class="badge ${ep.method}">${ep.method}</span></td>
          <td>${ep.desc}</td>
          <td>${Array.isArray(ep.query) ? ep.query.join(", ") : ep.query}</td>
          <td><button class="btn" onclick="tryNews('${ep.name}')">Try</button></td>
        `;
        newsBody.appendChild(tr);
      });
    });
    function tryNews(feature) {
      const panel = document.getElementById('newsResponsePanel');
      panel.style.display = 'block';
      panel.textContent = `⚡ Menjalankan ${feature}...`;

      const apiKey = document.getElementById('apiKeyInput')?.value || "";
      if (!apiKey) {
        panel.textContent = "Error: API key wajib diisi!";
        return;
      }

      let url = "";
      switch (feature) {
        case "CNN Indonesia":
          url = `https://api2.teamhackbotsindo.my.id/api/news-cnn?apikey=${apiKey}`;
          break;
        case "Detik News":
          url = `https://api2.teamhackbotsindo.my.id/api/news-detik?apikey=${apiKey}`;
          break;
        case "Liputan 6":
          url = `https://api2.teamhackbotsindo.my.id/api/news-liputan6?apikey=${apiKey}`;
          break;
        case "Kompas":
          url = `https://api2.teamhackbotsindo.my.id/api/news-kompas?apikey=${apiKey}`;
          break;
        case "Republika":
          url = `https://api2.teamhackbotsindo.my.id/api/news-republika?apikey=${apiKey}`;
          break;
      }

      fetch(url, { headers: { "x-api-key": apiKey } })
        .then(async res => {
          const raw = await res.text();
          try {
            return JSON.parse(raw);
          } catch {
            return { error: "Response bukan JSON", raw: raw.slice(0,200) };
          }
        })
        .then(data => {
          const articles = data.result?.data || [];
          if (!articles.length) {
            panel.textContent = "Tidak ada berita ditemukan.";
            return;
          }
          let html = "<ul>";
          articles.forEach(a => {
            html += `
              <li>
                <p><strong>${a.title || "-"}</strong></p>
                <p>${a.description || ""}</p>
                ${a.thumbnail ? `<img src="${a.thumbnail}" style="max-width:200px">` : ""}
                ${a.link ? `<p><a href="${a.link}" target="_blank">Baca selengkapnya</a></p>` : ""}
              </li>
            `;
          });
          html += "</ul>";
          panel.innerHTML = html;
        })
        .catch(err => panel.textContent = "Error: " + err);
    }

    // TAB NEW
    const tabJSNews = document.getElementById('tabJSNews');
    const tabPyNews = document.getElementById('tabPyNews');
    const tabGoNews = document.getElementById('tabGoNews');

    const jsNews = document.getElementById('jsNews');
    const pyNews = document.getElementById('pyNews');
    const goNews = document.getElementById('goNews');

    function showNews(tab) {
      [tabJSNews, tabPyNews, tabGoNews].forEach(btn => btn.classList.remove('active'));
      [jsNews, pyNews, goNews].forEach(panel => panel.style.display = 'none');

      tab.classList.add('active');
      document.getElementById(tab.getAttribute('aria-controls')).style.display = 'block';
    // Sinkronisasi dengan sidebar
      const targetId = tab.getAttribute('aria-controls');
      const sidebarLink = document.querySelector(`.sidebar .nav-list a[href="#${targetId}"]`);
      if (sidebarLink) {
        document.querySelectorAll('.sidebar .nav-list a').forEach(link => link.classList.remove('active'));
        sidebarLink.classList.add('active');
      }
    }

    tabJSNews.addEventListener('click', () => showNews(tabJSNews));
    tabPyNews.addEventListener('click', () => showNews(tabPyNews));
    tabGoNews.addEventListener('click', () => showNews(tabGoNews));

  </script>
</body>
</html> 